<!DOCTYPE html>
<html lang="en">
<head>
	<title>数地景观--模型转换</title>
	<meta charset="utf-8">
	<meta name="viewport" content="width=device-width, user-scalable=no, minimum-scale=1.0, maximum-scale=1.0">
	<link rel="icon" href="../images/model.ico">
	<style>
	</style>
	<!--<link rel="stylesheet" href="./css/upload.css">-->
	<link rel="stylesheet" href="../css/DragAndDrop.css">
	<link rel="stylesheet" href="../css/myCss.css">
	<style>
		.glb {
			margin-bottom: 30px;
		}
	</style>
</head>
<body>

<!--header所展示的内容-->
<header id="here">
	<div class="left">
		<a href="main1.html"><img src="../images/dibulogo.png" alt="" class="fl"></a>
		<ul class="fl navbar gone">
			<li class="fl">
				<a href="main1.html" class="nav-a" >主页</a>
			</li>
			<li class="fl">
				<a href="" class="nav-a" style="color:#ea4c89 ">模型查看和转换</a>
			</li>
			<li class="fl">
				<a href="about_the_model.html" class="nav-a">模型百科</a>
			</li>
			<li class="fl">
				<a href="keep_in_touch.html" class="nav-a">保持联系</a>
			</li>
			<!--<li class="fl">-->
				<!--<a href="http://www.paramland.com/" target="_blank" class="nav-a">关于我们</a>-->
			<!--</li>-->
		</ul>
	</div>
	<div class="right">
		<ul class="fr navbar">
			<li class="fr gone">
				<a href="http://www.paramland.com/" target="_blank"><span>关于我们 | Paramland</span></a>
			</li>
		</ul>
	</div>
</header>

<div id="info">
	 <h1>模型查看和转换</h1>
	<div class="description">
		<P>您可以通过本页面对你的3D模型进行<b>在线查看</b>和<b>转换</b>，<b>不需要</b>任何第三方软件!</P>
		<p>所有转换都发生在您的电脑上，任何模型或文本都不会上传到我们的服务器或以任何方式存储。</p>
	</div>
</div>

<!--拖拽上传-->
<div id="dropDiv">
	<div class="uploadebutton">
		<form>
			<div>
				<label for="file_uploads">选择你要查看的模型文件(仅支持glTF/dae/obj),点击此处选择或者拖拽到此处</label>
				<br>
				<input type="file"
				       id="file_uploads"
				       name="file_uploads"
				       onchange="onUpload(this.files[0])"
				       accept="" multiple
				>
			</div>
		</form>
	</div>
</div>
<div>
	<button id="export_scene">导出场景</button>
</div>
<div class="glb">
	<label><input id="option_binary" name="visible" type="checkbox">GLB是glTF2.0文件格式的二进制版本(<code>.glb</code>)(可选项)</label>
</div>


<!--拖拽上传插件-->
<script type="text/javascript" src="../js/dragAndDrop/polyfill.js"></script>
<script type="text/javascript" src="../js/dragAndDrop/DragAndDrop.js"></script>

<!-- 加载loaders JS文件 -->
<script type="text/javascript" src="../js/three.js"></script>
<script type="text/javascript" src="../ThirdPartyPlugin/ThreeJsPlugin/WebGL.js"></script>
<!-- GLTF加载器 -->
<script type="text/javascript" src="../ThirdPartyPlugin/ThreeJsPlugin/loaders/GLTFLoader.js"></script>
<!--obj加载器-->
<script type="text/javascript" src="../ThirdPartyPlugin/ThreeJsPlugin/loaders/OBJLoader.js"></script>
<!--dae加载器-->
<script type="text/javascript" src="../ThirdPartyPlugin/ThreeJsPlugin/loaders/ColladaLoader.js"></script>

<!--gltf导出器-->
<script src="../ThirdPartyPlugin/ThreeJsPlugin/exporters/GLTFExporter.js"></script>

<!--控制器-->
<script type="text/javascript" src="../ThirdPartyPlugin/ThreeJsPlugin/controls/OrbitControls.js"></script>
<script type="text/javascript" src="../ThirdPartyPlugin/ThreeJsPlugin/loaders/DRACOLoader.js"></script>


<!--<script src="https://code.jquery.com/jquery-3.4.1.min.js"></script>-->
<!--<script type="text/javascript" src="../ThirdPartyPlugin/jcanvas.min.js"></script>-->

<script type="text/javascript" src="../js/modelCoversion.js"></script>
<!--<script>

	&lt;!&ndash;导出&ndash;&gt;
	function exportGLTF( input ) {

		var gltfExporter = new THREE.GLTFExporter();


		//选择导出glb还是gltf
		var options = {
			binary: document.getElementById( 'option_binary' ).checked,
		};
		gltfExporter.parse( input, function ( result ) {
			if ( result instanceof ArrayBuffer ) {
				saveArrayBuffer( result, 'scene.glb' );
			} else {
				var output = JSON.stringify( result, null, 2 );
				console.log( output );
				saveString( output, 'scene.gltf' );
			}
		} ,options);
	}

	document.getElementById( 'export_scene' ).addEventListener( 'click', function () {
		exportGLTF( scene1 );
	} );


	var link = document.createElement( 'a' );
	link.style.display = 'none';
	document.body.appendChild( link ); // Firefox workaround, see #6594

	function save( blob, filename ) {
		link.href = URL.createObjectURL( blob );
		link.download = filename;
		link.click();
	}

	function saveString( text, filename ) {
		save( new Blob( [ text ], { type: 'text/plain' } ), filename );
	}


	function saveArrayBuffer( buffer, filename ) {
		save( new Blob( [ buffer ], { type: 'application/octet-stream' } ), filename );
	}

	if ( WEBGL.isWebGLAvailable() === false ) {
		document.body.appendChild( WEBGL.getWebGLErrorMessage() );
	}

	var container;

	var camera, scene1,  renderer, controls, elf;
	var inputModel;


	// -&#45;&#45;&#45;&#45;&#45;&#45;&#45;&#45;&#45;&#45;&#45;&#45;&#45;&#45;&#45;&#45;&#45;&#45;&#45;&#45;&#45;&#45;&#45;&#45;&#45;&#45;&#45;&#45;&#45;&#45;&#45;&#45;&#45;&#45;&#45;&#45;&#45;&#45;&#45;&#45;&#45;&#45;&#45;&#45;&#45;&#45;&#45;&#45;&#45;&#45;&#45;&#45;&#45;&#45;&#45;&#45;&#45;&#45;&#45;&#45;&#45;&#45;&#45;&#45;&#45;&#45;&#45;&#45;
	//文件上传按钮
	// -&#45;&#45;&#45;&#45;&#45;&#45;&#45;&#45;&#45;&#45;&#45;&#45;&#45;&#45;&#45;&#45;&#45;&#45;&#45;&#45;&#45;&#45;&#45;&#45;&#45;&#45;&#45;&#45;&#45;&#45;&#45;&#45;&#45;&#45;&#45;&#45;&#45;&#45;&#45;&#45;&#45;&#45;&#45;&#45;&#45;&#45;&#45;&#45;&#45;&#45;&#45;&#45;&#45;&#45;&#45;&#45;&#45;&#45;&#45;&#45;&#45;&#45;&#45;&#45;&#45;&#45;&#45;&#45;
	function onUpload(file) {

		//清除画布
		var canvas = document.getElementsByTagName('canvas');
		console.log(canvas);
		/*// 保存当前渲染上下文所进行的变换
		context.save();

	// 重置渲染上下文并清空画布
		context.setTransform(1, 0, 0, 1, 0, 0);
		context.clearRect(0, 0, canvas.width, canvas.height);

	// 恢复先前渲染上下文所进行的变换
		context.restore();*/

		// 文件转化成二进制文件
		var blob = new Blob([file]),
			//转化成url
			url = URL.createObjectURL(blob);
		console.log(url);

		//对文件进行判断
		console.log(file);
		console.log(file.name)
		console.log(file.name.slice(-4));
		//判断上传的file文件是何种格式&#45;&#45;gltf/obj/osgb/dae

		if (file.name.slice(-4) == 'gltf'){
			initGltf(url);
			animate();
			console.log('成功显示gltf文件');
		} else if (file.name.slice(-4) == '.obj') {
			initObj(url);
			animate();
			console.log('成功显示obj文件')
		} else if (file.name.slice(-4) == '.dae') {
			initDae(url);
			animate();
			console.log('成功显示dae文件')
		} else {
			alert('请上传正确的文件')
		}
	}


	function initGltf(url) {


		container = document.createElement( 'div' );
		document.body.appendChild( container );



		scene1 = new THREE.Scene();

		// -&#45;&#45;&#45;&#45;&#45;&#45;&#45;&#45;&#45;&#45;&#45;&#45;&#45;&#45;&#45;&#45;&#45;&#45;&#45;&#45;&#45;&#45;&#45;&#45;&#45;&#45;&#45;&#45;&#45;&#45;&#45;&#45;&#45;&#45;&#45;&#45;&#45;&#45;&#45;&#45;&#45;&#45;&#45;&#45;&#45;&#45;&#45;&#45;&#45;&#45;&#45;&#45;&#45;&#45;&#45;&#45;&#45;&#45;&#45;&#45;&#45;&#45;&#45;&#45;&#45;&#45;&#45;&#45;
		// Perspective Camera
		// -&#45;&#45;&#45;&#45;&#45;&#45;&#45;&#45;&#45;&#45;&#45;&#45;&#45;&#45;&#45;&#45;&#45;&#45;&#45;&#45;&#45;&#45;&#45;&#45;&#45;&#45;&#45;&#45;&#45;&#45;&#45;&#45;&#45;&#45;&#45;&#45;&#45;&#45;&#45;&#45;&#45;&#45;&#45;&#45;&#45;&#45;&#45;&#45;&#45;&#45;&#45;&#45;&#45;&#45;&#45;&#45;&#45;&#45;&#45;&#45;&#45;&#45;&#45;&#45;&#45;&#45;&#45;&#45;
		camera = new THREE.PerspectiveCamera( 45, window.innerWidth / window.innerHeight, 1, 2000 );
		camera.position.set( 600, 400, 0 );

		camera.name = "PerspectiveCamera";
		scene1.add( camera );

		// -&#45;&#45;&#45;&#45;&#45;&#45;&#45;&#45;&#45;&#45;&#45;&#45;&#45;&#45;&#45;&#45;&#45;&#45;&#45;&#45;&#45;&#45;&#45;&#45;&#45;&#45;&#45;&#45;&#45;&#45;&#45;&#45;&#45;&#45;&#45;&#45;&#45;&#45;&#45;&#45;&#45;&#45;&#45;&#45;&#45;&#45;&#45;&#45;&#45;&#45;&#45;&#45;&#45;&#45;&#45;&#45;&#45;&#45;&#45;&#45;&#45;&#45;&#45;&#45;&#45;&#45;&#45;&#45;
		// Ambient light  环境光
		// -&#45;&#45;&#45;&#45;&#45;&#45;&#45;&#45;&#45;&#45;&#45;&#45;&#45;&#45;&#45;&#45;&#45;&#45;&#45;&#45;&#45;&#45;&#45;&#45;&#45;&#45;&#45;&#45;&#45;&#45;&#45;&#45;&#45;&#45;&#45;&#45;&#45;&#45;&#45;&#45;&#45;&#45;&#45;&#45;&#45;&#45;&#45;&#45;&#45;&#45;&#45;&#45;&#45;&#45;&#45;&#45;&#45;&#45;&#45;&#45;&#45;&#45;&#45;&#45;&#45;&#45;&#45;&#45;
		var light = new THREE.AmbientLight( 0xffffff, 1);
		light.name = 'AmbientLight';
		scene1.add( light );

		// -&#45;&#45;&#45;&#45;&#45;&#45;&#45;&#45;&#45;&#45;&#45;&#45;&#45;&#45;&#45;&#45;&#45;&#45;&#45;&#45;&#45;&#45;&#45;&#45;&#45;&#45;&#45;&#45;&#45;&#45;&#45;&#45;&#45;&#45;&#45;&#45;&#45;&#45;&#45;&#45;&#45;&#45;&#45;&#45;&#45;&#45;&#45;&#45;&#45;&#45;&#45;&#45;&#45;&#45;&#45;&#45;&#45;&#45;&#45;&#45;&#45;&#45;&#45;&#45;&#45;&#45;&#45;&#45;
		// DirectLight  直射光
		// -&#45;&#45;&#45;&#45;&#45;&#45;&#45;&#45;&#45;&#45;&#45;&#45;&#45;&#45;&#45;&#45;&#45;&#45;&#45;&#45;&#45;&#45;&#45;&#45;&#45;&#45;&#45;&#45;&#45;&#45;&#45;&#45;&#45;&#45;&#45;&#45;&#45;&#45;&#45;&#45;&#45;&#45;&#45;&#45;&#45;&#45;&#45;&#45;&#45;&#45;&#45;&#45;&#45;&#45;&#45;&#45;&#45;&#45;&#45;&#45;&#45;&#45;&#45;&#45;&#45;&#45;&#45;&#45;
		light = new THREE.DirectionalLight( 0xffffff, 0.1 );
		light.target.position.set( 0, 0, -1 );
		light.add( light.target );
		light.lookAt( -1, -1, 0 );
		light.name = 'DirectionalLight';
		scene1.add( light );


		// -&#45;&#45;&#45;&#45;&#45;&#45;&#45;&#45;&#45;&#45;&#45;&#45;&#45;&#45;&#45;&#45;&#45;&#45;&#45;&#45;&#45;&#45;&#45;&#45;&#45;&#45;&#45;&#45;&#45;&#45;&#45;&#45;&#45;&#45;&#45;&#45;&#45;&#45;&#45;&#45;&#45;&#45;&#45;&#45;&#45;&#45;&#45;&#45;&#45;&#45;&#45;&#45;&#45;&#45;&#45;&#45;&#45;&#45;&#45;&#45;&#45;&#45;&#45;&#45;&#45;&#45;&#45;&#45;
		//加载gltf格式的模型
		var gltfloader = new THREE.GLTFLoader();
		gltfloader.setDRACOLoader(new THREE.DRACOLoader());
		gltfloader.load(
			url,
			function (gltf) {
				scene1.add(gltf.scene);
				gltf.scene.scale.set(3, 3, 3);
			},
			function (xhr) {
				console.log((xhr.loaded / xhr.total * 1) + '% loaded');
			},
			function (error) {
				console.log(error);
			},
		);



		// -&#45;&#45;&#45;&#45;&#45;&#45;&#45;&#45;&#45;&#45;&#45;&#45;&#45;&#45;&#45;&#45;&#45;&#45;&#45;&#45;&#45;&#45;&#45;&#45;&#45;&#45;&#45;&#45;&#45;&#45;&#45;&#45;&#45;&#45;&#45;&#45;&#45;&#45;&#45;&#45;&#45;&#45;&#45;&#45;&#45;&#45;&#45;&#45;&#45;&#45;&#45;&#45;&#45;&#45;&#45;&#45;&#45;&#45;&#45;&#45;&#45;&#45;&#45;&#45;&#45;&#45;&#45;&#45;
		renderer = new THREE.WebGLRenderer( { antialias: true } );
		renderer.setPixelRatio( window.devicePixelRatio );
		//设置canvas 大小
		renderer.setSize( window.innerWidth/1.6, window.innerHeight/1.6 );

		//设置背景颜色
		renderer.setClearColor(0xffffff);
		container.appendChild( renderer.domElement );
		window.addEventListener( 'resize', onWindowResize, false );

		// -&#45;&#45;&#45;&#45;&#45;&#45;&#45;&#45;&#45;&#45;&#45;&#45;&#45;&#45;&#45;&#45;&#45;&#45;&#45;&#45;&#45;&#45;&#45;&#45;&#45;&#45;&#45;&#45;&#45;&#45;&#45;&#45;&#45;&#45;&#45;&#45;&#45;&#45;&#45;&#45;&#45;&#45;&#45;&#45;&#45;&#45;&#45;&#45;&#45;&#45;&#45;&#45;&#45;&#45;&#45;&#45;&#45;&#45;&#45;&#45;&#45;&#45;&#45;&#45;&#45;&#45;&#45;&#45;
		//鼠标操作模型操作
		// -&#45;&#45;&#45;&#45;&#45;&#45;&#45;&#45;&#45;&#45;&#45;&#45;&#45;&#45;&#45;&#45;&#45;&#45;&#45;&#45;&#45;&#45;&#45;&#45;&#45;&#45;&#45;&#45;&#45;&#45;&#45;&#45;&#45;&#45;&#45;&#45;&#45;&#45;&#45;&#45;&#45;&#45;&#45;&#45;&#45;&#45;&#45;&#45;&#45;&#45;&#45;&#45;&#45;&#45;&#45;&#45;&#45;&#45;&#45;&#45;&#45;&#45;&#45;&#45;&#45;&#45;&#45;&#45;
		controls = new THREE.OrbitControls(camera, renderer.domElement);
		// 使动画循环使用时阻尼或自转 意思是否有惯性
		controls.enableDamping = true;
		//动态阻尼系数 就是鼠标拖拽旋转灵敏度
		controls.dampingFactor = 0.55;
		//是否可以缩放
		controls.enableZoom = true;
		//是否自动旋转
		controls.autoRotate = false;
		//设置相机距离原点的最远距离
		controls.minDistance = 1;
		//设置相机距离原点的最远距离
		controls.maxDistance = 200;
		//是否开启右键拖拽
		controls.enablePan = true;
	}

	function initObj(url) {
		container = document.createElement( 'div' );
		document.body.appendChild( container );
		context.clearRect(0, 0, canvas.width, canvas.height);


		scene1 = new THREE.Scene();
		scene1.name = 'Scene1';

		// -&#45;&#45;&#45;&#45;&#45;&#45;&#45;&#45;&#45;&#45;&#45;&#45;&#45;&#45;&#45;&#45;&#45;&#45;&#45;&#45;&#45;&#45;&#45;&#45;&#45;&#45;&#45;&#45;&#45;&#45;&#45;&#45;&#45;&#45;&#45;&#45;&#45;&#45;&#45;&#45;&#45;&#45;&#45;&#45;&#45;&#45;&#45;&#45;&#45;&#45;&#45;&#45;&#45;&#45;&#45;&#45;&#45;&#45;&#45;&#45;&#45;&#45;&#45;&#45;&#45;&#45;&#45;&#45;
		// Perspective Camera
		// -&#45;&#45;&#45;&#45;&#45;&#45;&#45;&#45;&#45;&#45;&#45;&#45;&#45;&#45;&#45;&#45;&#45;&#45;&#45;&#45;&#45;&#45;&#45;&#45;&#45;&#45;&#45;&#45;&#45;&#45;&#45;&#45;&#45;&#45;&#45;&#45;&#45;&#45;&#45;&#45;&#45;&#45;&#45;&#45;&#45;&#45;&#45;&#45;&#45;&#45;&#45;&#45;&#45;&#45;&#45;&#45;&#45;&#45;&#45;&#45;&#45;&#45;&#45;&#45;&#45;&#45;&#45;&#45;
		camera = new THREE.PerspectiveCamera( 45, window.innerWidth / window.innerHeight, 1, 2000 );
		camera.position.set( 600, 400, 0 );

		camera.name = "PerspectiveCamera";
		scene1.add( camera );

		// -&#45;&#45;&#45;&#45;&#45;&#45;&#45;&#45;&#45;&#45;&#45;&#45;&#45;&#45;&#45;&#45;&#45;&#45;&#45;&#45;&#45;&#45;&#45;&#45;&#45;&#45;&#45;&#45;&#45;&#45;&#45;&#45;&#45;&#45;&#45;&#45;&#45;&#45;&#45;&#45;&#45;&#45;&#45;&#45;&#45;&#45;&#45;&#45;&#45;&#45;&#45;&#45;&#45;&#45;&#45;&#45;&#45;&#45;&#45;&#45;&#45;&#45;&#45;&#45;&#45;&#45;&#45;&#45;
		// Ambient light  环境光
		// -&#45;&#45;&#45;&#45;&#45;&#45;&#45;&#45;&#45;&#45;&#45;&#45;&#45;&#45;&#45;&#45;&#45;&#45;&#45;&#45;&#45;&#45;&#45;&#45;&#45;&#45;&#45;&#45;&#45;&#45;&#45;&#45;&#45;&#45;&#45;&#45;&#45;&#45;&#45;&#45;&#45;&#45;&#45;&#45;&#45;&#45;&#45;&#45;&#45;&#45;&#45;&#45;&#45;&#45;&#45;&#45;&#45;&#45;&#45;&#45;&#45;&#45;&#45;&#45;&#45;&#45;&#45;&#45;
		var light = new THREE.AmbientLight( 0xffffff, 0.1 );
		light.name = 'AmbientLight';
		scene1.add( light );

		// -&#45;&#45;&#45;&#45;&#45;&#45;&#45;&#45;&#45;&#45;&#45;&#45;&#45;&#45;&#45;&#45;&#45;&#45;&#45;&#45;&#45;&#45;&#45;&#45;&#45;&#45;&#45;&#45;&#45;&#45;&#45;&#45;&#45;&#45;&#45;&#45;&#45;&#45;&#45;&#45;&#45;&#45;&#45;&#45;&#45;&#45;&#45;&#45;&#45;&#45;&#45;&#45;&#45;&#45;&#45;&#45;&#45;&#45;&#45;&#45;&#45;&#45;&#45;&#45;&#45;&#45;&#45;&#45;
		// DirectLight  直射光
		// -&#45;&#45;&#45;&#45;&#45;&#45;&#45;&#45;&#45;&#45;&#45;&#45;&#45;&#45;&#45;&#45;&#45;&#45;&#45;&#45;&#45;&#45;&#45;&#45;&#45;&#45;&#45;&#45;&#45;&#45;&#45;&#45;&#45;&#45;&#45;&#45;&#45;&#45;&#45;&#45;&#45;&#45;&#45;&#45;&#45;&#45;&#45;&#45;&#45;&#45;&#45;&#45;&#45;&#45;&#45;&#45;&#45;&#45;&#45;&#45;&#45;&#45;&#45;&#45;&#45;&#45;&#45;&#45;
		light = new THREE.DirectionalLight( 0xffffff, 0.1 );
		light.target.position.set( 0, 0, -1 );
		light.add( light.target );
		light.lookAt( -1, -1, 0 );
		light.name = 'DirectionalLight';
		scene1.add( light );

		// -&#45;&#45;&#45;&#45;&#45;&#45;&#45;&#45;&#45;&#45;&#45;&#45;&#45;&#45;&#45;&#45;&#45;&#45;&#45;&#45;&#45;&#45;&#45;&#45;&#45;&#45;&#45;&#45;&#45;&#45;&#45;&#45;&#45;&#45;&#45;&#45;&#45;&#45;&#45;&#45;&#45;&#45;&#45;&#45;&#45;&#45;&#45;&#45;&#45;&#45;&#45;&#45;&#45;&#45;&#45;&#45;&#45;&#45;&#45;&#45;&#45;&#45;&#45;&#45;&#45;&#45;&#45;&#45;
		// 导入obj文件
		// -&#45;&#45;&#45;&#45;&#45;&#45;&#45;&#45;&#45;&#45;&#45;&#45;&#45;&#45;&#45;&#45;&#45;&#45;&#45;&#45;&#45;&#45;&#45;&#45;&#45;&#45;&#45;&#45;&#45;&#45;&#45;&#45;&#45;&#45;&#45;&#45;&#45;&#45;&#45;&#45;&#45;&#45;&#45;&#45;&#45;&#45;&#45;&#45;&#45;&#45;&#45;&#45;&#45;&#45;&#45;&#45;&#45;&#45;&#45;&#45;&#45;&#45;&#45;&#45;&#45;&#45;&#45;&#45;
		var loader = new THREE.OBJLoader();
		loader.load( url, function ( obj ) {
			inputModel = obj;
			inputModel.scale.multiplyScalar( 1.5 );
			scene1.add( inputModel );
		} );

		// -&#45;&#45;&#45;&#45;&#45;&#45;&#45;&#45;&#45;&#45;&#45;&#45;&#45;&#45;&#45;&#45;&#45;&#45;&#45;&#45;&#45;&#45;&#45;&#45;&#45;&#45;&#45;&#45;&#45;&#45;&#45;&#45;&#45;&#45;&#45;&#45;&#45;&#45;&#45;&#45;&#45;&#45;&#45;&#45;&#45;&#45;&#45;&#45;&#45;&#45;&#45;&#45;&#45;&#45;&#45;&#45;&#45;&#45;&#45;&#45;&#45;&#45;&#45;&#45;&#45;&#45;&#45;&#45;
		renderer = new THREE.WebGLRenderer( { antialias: true } );
		renderer.setPixelRatio( window.devicePixelRatio );
		//设置canvas 大小
		renderer.setSize( window.innerWidth/1.6, window.innerHeight/1.6 );
		//设置背景颜色
		renderer.setClearColor(0xffffff);
		container.appendChild( renderer.domElement );
		window.addEventListener( 'resize', onWindowResize, false );

		// -&#45;&#45;&#45;&#45;&#45;&#45;&#45;&#45;&#45;&#45;&#45;&#45;&#45;&#45;&#45;&#45;&#45;&#45;&#45;&#45;&#45;&#45;&#45;&#45;&#45;&#45;&#45;&#45;&#45;&#45;&#45;&#45;&#45;&#45;&#45;&#45;&#45;&#45;&#45;&#45;&#45;&#45;&#45;&#45;&#45;&#45;&#45;&#45;&#45;&#45;&#45;&#45;&#45;&#45;&#45;&#45;&#45;&#45;&#45;&#45;&#45;&#45;&#45;&#45;&#45;&#45;&#45;&#45;
		//鼠标操作模型操作
		// -&#45;&#45;&#45;&#45;&#45;&#45;&#45;&#45;&#45;&#45;&#45;&#45;&#45;&#45;&#45;&#45;&#45;&#45;&#45;&#45;&#45;&#45;&#45;&#45;&#45;&#45;&#45;&#45;&#45;&#45;&#45;&#45;&#45;&#45;&#45;&#45;&#45;&#45;&#45;&#45;&#45;&#45;&#45;&#45;&#45;&#45;&#45;&#45;&#45;&#45;&#45;&#45;&#45;&#45;&#45;&#45;&#45;&#45;&#45;&#45;&#45;&#45;&#45;&#45;&#45;&#45;&#45;&#45;
		controls = new THREE.OrbitControls(camera, renderer.domElement);
		// 使动画循环使用时阻尼或自转 意思是否有惯性
		controls.enableDamping = true;
		//动态阻尼系数 就是鼠标拖拽旋转灵敏度
		controls.dampingFactor = 0.55;
		//是否可以缩放
		controls.enableZoom = true;
		//是否自动旋转
		controls.autoRotate = false;
		//设置相机距离原点的最远距离
		controls.minDistance = 1;
		//设置相机距离原点的最远距离
		controls.maxDistance = 200;
		//是否开启右键拖拽
		controls.enablePan = true;
	}

	function initDae(url) {
		container = document.createElement( 'div' );
		document.body.appendChild( container );

		scene1 = new THREE.Scene();
		scene1.name = 'Scene1';

		// -&#45;&#45;&#45;&#45;&#45;&#45;&#45;&#45;&#45;&#45;&#45;&#45;&#45;&#45;&#45;&#45;&#45;&#45;&#45;&#45;&#45;&#45;&#45;&#45;&#45;&#45;&#45;&#45;&#45;&#45;&#45;&#45;&#45;&#45;&#45;&#45;&#45;&#45;&#45;&#45;&#45;&#45;&#45;&#45;&#45;&#45;&#45;&#45;&#45;&#45;&#45;&#45;&#45;&#45;&#45;&#45;&#45;&#45;&#45;&#45;&#45;&#45;&#45;&#45;&#45;&#45;&#45;&#45;
		// Perspective Camera
		// -&#45;&#45;&#45;&#45;&#45;&#45;&#45;&#45;&#45;&#45;&#45;&#45;&#45;&#45;&#45;&#45;&#45;&#45;&#45;&#45;&#45;&#45;&#45;&#45;&#45;&#45;&#45;&#45;&#45;&#45;&#45;&#45;&#45;&#45;&#45;&#45;&#45;&#45;&#45;&#45;&#45;&#45;&#45;&#45;&#45;&#45;&#45;&#45;&#45;&#45;&#45;&#45;&#45;&#45;&#45;&#45;&#45;&#45;&#45;&#45;&#45;&#45;&#45;&#45;&#45;&#45;&#45;&#45;
		camera = new THREE.PerspectiveCamera( 45, window.innerWidth / window.innerHeight, 1, 2000 );
		camera.position.set( 600, 400, 0 );

		camera.name = "PerspectiveCamera";
		scene1.add( camera );

		// -&#45;&#45;&#45;&#45;&#45;&#45;&#45;&#45;&#45;&#45;&#45;&#45;&#45;&#45;&#45;&#45;&#45;&#45;&#45;&#45;&#45;&#45;&#45;&#45;&#45;&#45;&#45;&#45;&#45;&#45;&#45;&#45;&#45;&#45;&#45;&#45;&#45;&#45;&#45;&#45;&#45;&#45;&#45;&#45;&#45;&#45;&#45;&#45;&#45;&#45;&#45;&#45;&#45;&#45;&#45;&#45;&#45;&#45;&#45;&#45;&#45;&#45;&#45;&#45;&#45;&#45;&#45;&#45;
		// Ambient light  环境光
		// -&#45;&#45;&#45;&#45;&#45;&#45;&#45;&#45;&#45;&#45;&#45;&#45;&#45;&#45;&#45;&#45;&#45;&#45;&#45;&#45;&#45;&#45;&#45;&#45;&#45;&#45;&#45;&#45;&#45;&#45;&#45;&#45;&#45;&#45;&#45;&#45;&#45;&#45;&#45;&#45;&#45;&#45;&#45;&#45;&#45;&#45;&#45;&#45;&#45;&#45;&#45;&#45;&#45;&#45;&#45;&#45;&#45;&#45;&#45;&#45;&#45;&#45;&#45;&#45;&#45;&#45;&#45;&#45;
		var light = new THREE.AmbientLight( 0xffffff, 0.1 );
		light.name = 'AmbientLight';
		scene1.add( light );

		// -&#45;&#45;&#45;&#45;&#45;&#45;&#45;&#45;&#45;&#45;&#45;&#45;&#45;&#45;&#45;&#45;&#45;&#45;&#45;&#45;&#45;&#45;&#45;&#45;&#45;&#45;&#45;&#45;&#45;&#45;&#45;&#45;&#45;&#45;&#45;&#45;&#45;&#45;&#45;&#45;&#45;&#45;&#45;&#45;&#45;&#45;&#45;&#45;&#45;&#45;&#45;&#45;&#45;&#45;&#45;&#45;&#45;&#45;&#45;&#45;&#45;&#45;&#45;&#45;&#45;&#45;&#45;&#45;
		// DirectLight  直射光
		// -&#45;&#45;&#45;&#45;&#45;&#45;&#45;&#45;&#45;&#45;&#45;&#45;&#45;&#45;&#45;&#45;&#45;&#45;&#45;&#45;&#45;&#45;&#45;&#45;&#45;&#45;&#45;&#45;&#45;&#45;&#45;&#45;&#45;&#45;&#45;&#45;&#45;&#45;&#45;&#45;&#45;&#45;&#45;&#45;&#45;&#45;&#45;&#45;&#45;&#45;&#45;&#45;&#45;&#45;&#45;&#45;&#45;&#45;&#45;&#45;&#45;&#45;&#45;&#45;&#45;&#45;&#45;&#45;
		light = new THREE.DirectionalLight( 0xffffff, 0.1 );
		light.target.position.set( 0, 0, -1 );
		light.add( light.target );
		light.lookAt( -1, -1, 0 );
		light.name = 'DirectionalLight';
		scene1.add( light );


		// -&#45;&#45;&#45;&#45;&#45;&#45;&#45;&#45;&#45;&#45;&#45;&#45;&#45;&#45;&#45;&#45;&#45;&#45;&#45;&#45;&#45;&#45;&#45;&#45;&#45;&#45;&#45;&#45;&#45;&#45;&#45;&#45;&#45;&#45;&#45;&#45;&#45;&#45;&#45;&#45;&#45;&#45;&#45;&#45;&#45;&#45;&#45;&#45;&#45;&#45;&#45;&#45;&#45;&#45;&#45;&#45;&#45;&#45;&#45;&#45;&#45;&#45;&#45;&#45;&#45;&#45;&#45;&#45;
		//加载dae格式的模型
		var loadingManager = new THREE.LoadingManager( function () {
			scene1.add( elf );
		} );

		var daeLoader = new THREE.ColladaLoader(loadingManager);
		daeLoader.load(
			url,
			function (collada ) {
				elf = collada.scene;
				inputModel = collada;
				scene1.add( inputModel );

				//设置位置
				elf.position.set(0, 0, -20)
			},
			function (xhr) {
				console.log((xhr.loaded / xhr.total * 1) + '% loaded');
			},
			function (error) {
				console.log(error);
			},
		);



		// -&#45;&#45;&#45;&#45;&#45;&#45;&#45;&#45;&#45;&#45;&#45;&#45;&#45;&#45;&#45;&#45;&#45;&#45;&#45;&#45;&#45;&#45;&#45;&#45;&#45;&#45;&#45;&#45;&#45;&#45;&#45;&#45;&#45;&#45;&#45;&#45;&#45;&#45;&#45;&#45;&#45;&#45;&#45;&#45;&#45;&#45;&#45;&#45;&#45;&#45;&#45;&#45;&#45;&#45;&#45;&#45;&#45;&#45;&#45;&#45;&#45;&#45;&#45;&#45;&#45;&#45;&#45;&#45;
		renderer = new THREE.WebGLRenderer( { antialias: true } );
		renderer.setPixelRatio( window.devicePixelRatio );
		renderer.setSize( window.innerWidth/1.6, window.innerHeight/1.6 );
		//设置背景颜色
		renderer.setClearColor(0xffffff);
		container.appendChild( renderer.domElement );
		window.addEventListener( 'resize', onWindowResize, false );

		// -&#45;&#45;&#45;&#45;&#45;&#45;&#45;&#45;&#45;&#45;&#45;&#45;&#45;&#45;&#45;&#45;&#45;&#45;&#45;&#45;&#45;&#45;&#45;&#45;&#45;&#45;&#45;&#45;&#45;&#45;&#45;&#45;&#45;&#45;&#45;&#45;&#45;&#45;&#45;&#45;&#45;&#45;&#45;&#45;&#45;&#45;&#45;&#45;&#45;&#45;&#45;&#45;&#45;&#45;&#45;&#45;&#45;&#45;&#45;&#45;&#45;&#45;&#45;&#45;&#45;&#45;&#45;&#45;
		//鼠标操作模型操作
		// -&#45;&#45;&#45;&#45;&#45;&#45;&#45;&#45;&#45;&#45;&#45;&#45;&#45;&#45;&#45;&#45;&#45;&#45;&#45;&#45;&#45;&#45;&#45;&#45;&#45;&#45;&#45;&#45;&#45;&#45;&#45;&#45;&#45;&#45;&#45;&#45;&#45;&#45;&#45;&#45;&#45;&#45;&#45;&#45;&#45;&#45;&#45;&#45;&#45;&#45;&#45;&#45;&#45;&#45;&#45;&#45;&#45;&#45;&#45;&#45;&#45;&#45;&#45;&#45;&#45;&#45;&#45;&#45;
		controls = new THREE.OrbitControls(camera, renderer.domElement);
		// 使动画循环使用时阻尼或自转 意思是否有惯性
		controls.enableDamping = true;
		//动态阻尼系数 就是鼠标拖拽旋转灵敏度
		controls.dampingFactor = 0.55;
		//是否可以缩放
		controls.enableZoom = true;
		//是否自动旋转
		controls.autoRotate = false;
		//设置相机距离原点的最远距离
		controls.minDistance = 1;
		//设置相机距离原点的最远距离
		controls.maxDistance = 200;
		//是否开启右键拖拽
		controls.enablePan = true;
	}


	// -&#45;&#45;&#45;&#45;&#45;&#45;&#45;&#45;&#45;&#45;&#45;&#45;&#45;&#45;&#45;&#45;&#45;&#45;&#45;&#45;&#45;&#45;&#45;&#45;&#45;&#45;&#45;&#45;&#45;&#45;&#45;&#45;&#45;&#45;&#45;&#45;&#45;&#45;&#45;&#45;&#45;&#45;&#45;&#45;&#45;&#45;&#45;&#45;&#45;&#45;&#45;&#45;&#45;&#45;&#45;&#45;&#45;&#45;&#45;&#45;&#45;&#45;&#45;&#45;&#45;&#45;&#45;&#45;
	function onWindowResize() {
		camera.aspect = window.innerWidth / window.innerHeight;
		camera.updateProjectionMatrix();
		//设置canvas 大小
		renderer.setSize( window.innerWidth/2, window.innerHeight/2 );
	}

	// -&#45;&#45;&#45;&#45;&#45;&#45;&#45;&#45;&#45;&#45;&#45;&#45;&#45;&#45;&#45;&#45;&#45;&#45;&#45;&#45;&#45;&#45;&#45;&#45;&#45;&#45;&#45;&#45;&#45;&#45;&#45;&#45;&#45;&#45;&#45;&#45;&#45;&#45;&#45;&#45;&#45;&#45;&#45;&#45;&#45;&#45;&#45;&#45;&#45;&#45;&#45;&#45;&#45;&#45;&#45;&#45;&#45;&#45;&#45;&#45;&#45;&#45;&#45;&#45;&#45;&#45;&#45;&#45;
	function animate() {
		requestAnimationFrame( animate );
		render();
	}

	// -&#45;&#45;&#45;&#45;&#45;&#45;&#45;&#45;&#45;&#45;&#45;&#45;&#45;&#45;&#45;&#45;&#45;&#45;&#45;&#45;&#45;&#45;&#45;&#45;&#45;&#45;&#45;&#45;&#45;&#45;&#45;&#45;&#45;&#45;&#45;&#45;&#45;&#45;&#45;&#45;&#45;&#45;&#45;&#45;&#45;&#45;&#45;&#45;&#45;&#45;&#45;&#45;&#45;&#45;&#45;&#45;&#45;&#45;&#45;&#45;&#45;&#45;&#45;&#45;&#45;&#45;&#45;&#45;
	function render() {
		camera.lookAt( scene1.position );
		renderer.render( scene1, camera );
	}


</script>-->

</body>
</html>
